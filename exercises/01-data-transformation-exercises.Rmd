---
title: "Data Transformation Exercises"
output: github_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

The following five questions are based on concepts covered in Chapters 4-6 in 
R4DS and can be answered using the `flights` dataset from the `nycflights13` 
package. Start by loading the `tidyverse` and `nycflights13` packages.

```{r load-packages, warning = FALSE, message = FALSE}
library(tidyverse)
library(nycflights13)
```

Run `?flights` in the console to familiarize yourself with the dataset.

--- 

**Question 1**:
The following questions ask you to find flights that meet certain criteria and 
then count them.

 - How many flights flew into LAX?
 - How many flights flew out of LAX?
 - How many flights are greater than or equal to 2000 miles?
 - How many flights were destined for airports in the Los Angeles area (LAX, 
 ONT, SNA, PSP, SBD, BUR, or LGB), but did not originate out of JFK?

**Hint:** For each question, filter the dataset, then count the number of rows 
using `nrow()`. A review of comparison operators is presented in [5.2.2][5.2.2]. 
For the fourth question, use the `%in%` operator as well as the exclamation mark 
(`!`), which means not.

These questions are based on [5.2.4#1][5.2.4 Exercises] and designed to 
strengthen your ability to use the `dplyr` verb [`filter()`][filter].

---

**Question 2**:
How many flights were "ghost flights"? A "ghost flight" is defined as a flight 
that departed, but never arrived (i.e., has a missing `arr_time`).

This question is based on [5.2.4#3][5.2.4 Exercises] and designed to strengthen 
your understanding of how the `dplyr` verb [`filter()`][filter] treats `NA` 
values.

---

**Question 3**: 
How does [`arrange()`][arrange] treat missing values? How could you sort all 
rows with a missing `arr_time` to the top of the dataset?

This question is based on [5.3.1#1][5.3.1 Exercises] and designed to strengthen
your understanding of how the `dplyr` verb [`arrange()`][arrange] treats `NA` 
values.

---

**Question 4**:
What do you observe after running the code below? How does this behavior reflect 
how [`select()`][select] helpers deal with uppercase and lowercase matching by 
default? How can you change that default? 

```{r Q4, eval = FALSE}
select(flights, contains("TIME"))`
```

This question is based on [5.4.1#4][5.4.1 Exercises] and designed to strengthen 
your ability to use the `dplyr` verb [`select()`][select].

---

**Question 5**:
For each destination greater than or equal to 2000 miles away, compute total 
minutes of departure delay. Then determine what proportion of total 
departure-delay minutes each destination represents. What three destinations top 
the list? 

**Hint:** Use [`filter()`][filter] to find the destinations greater than or 
equal to 2000 miles away with positive `dep_delay` values, then 
[`group_by()`][summarize] `dest`, then [`summarize()`][summarize] to find total 
departure delay minutes by destination, then [`mutate()`][mutate] to find 
proportions, and finally [`arrange()`][arrange] to find the top three. 

This question is based on [5.7.1#4][5.7.1 Exercises] and designed to strengthen 
your ability to calculate [per-group proportions of totals][grouped mutates].


[5.2.2]: http://r4ds.had.co.nz/transform.html#logical-operators
[5.2.4 Exercises]: http://r4ds.had.co.nz/transform.html#exercises-7
[5.3.1 Exercises]: http://r4ds.had.co.nz/transform.html#exercises-8
[5.4.1 Exercises]: http://r4ds.had.co.nz/transform.html#exercises-9
[5.7.1 Exercises]: http://r4ds.had.co.nz/transform.html#exercises-12
[filter]: http://r4ds.had.co.nz/transform.html#filter-rows-with-filter
[arrange]: http://r4ds.had.co.nz/transform.html#arrange-rows-with-arrange
[select]: http://r4ds.had.co.nz/transform.html#select-columns-with-select
[mutate]: http://r4ds.had.co.nz/transform.html#add-new-variables-with-mutate
[grouped mutates]: http://r4ds.had.co.nz/transform.html#grouped-mutates-and-filters
[summarize]: http://r4ds.had.co.nz/transform.html#grouped-summaries-with-summarise
